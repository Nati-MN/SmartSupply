{% extends "layout.html" %}

{% block content %}
<div class="container">
    <h1>📦 SmartSupply – Artikelverwaltung</h1>

    <form method="post" class="form-section">
        <h2>➕ Neuen Artikel anlegen</h2>
        <div class="form-group">
            <label for="name">Name:</label>
            <input type="text" name="name" id="name" class="form-control" required>
        </div>
        <div class="form-group">
            <label for="lieferant">Lieferant:</label>
            <input type="text" name="lieferant" id="lieferant" class="form-control" required>
        </div>
        <div class="form-group">
            <label for="tag">Tag:</label>
            <input type="text" name="tag" id="tag" class="form-control" required>
        </div>
        <div class="form-group">
            <label for="maxmenge">Max. Menge:</label>
            <input type="number" name="maxmenge" id="maxmenge" class="form-control" required>
        </div>
        <div class="form-group">
            <label for="plz">Nur für PLZ (Komma getrennt, leer = alle):</label>
            <input type="text" name="plz" id="plz" class="form-control">
        </div>
        <div class="form-group">
            <label for="beschreibung">Beschreibung:</label>
            <input type="text" name="beschreibung" id="beschreibung" class="form-control">
        </div>
        <div class="form-group">
            <label for="gewicht">Gewicht (kg):</label>
            <input type="number" step="0.01" name="gewicht" id="gewicht" class="form-control">
        </div>
        <div class="form-group">
            <label for="einheit">Einheit:</label>
            <input type="text" name="einheit" id="einheit" class="form-control">
        </div>
        <div class="form-group">
            <label for="mhd">MHD (z.B. TT.MM.JJJJ):</label>
            <input type="text" name="mhd" id="mhd" class="form-control">
        </div>
        <div class="form-group">
            <label for="artikelnummer">Artikelnummer:</label>
            <input type="text" name="artikelnummer" id="artikelnummer" class="form-control">
        </div>

        <button type="submit" name="hinzu" class="btn btn-primary">➕ Hinzufügen</button>
    </form>

    <h2>📋 Bestehende Artikel</h2>
    <div class="table-responsive">
        <table class="table table-bordered table-hover table-sm">
            <thead class="thead-dark">
                <tr>
                    <th>Name</th>
                    <th>Lieferant</th>
                    <th>Tag</th>
                    <th>Max. Menge</th>
                    <th>Nur für PLZ</th>
                    <th>Beschreibung</th>
                    <th>Gewicht</th>
                    <th>Einheit</th>
                    <th>MHD</th>
                    <th>Artikelnummer</th>
                    <th>Aktion</th>
                </tr>
            </thead>
            <tbody>
                {% for art in artikel %}
                <tr>
                    <td>{{ art.name }}</td>
                    <td>{{ art.lieferant }}</td>
                    <td>{{ art.tag }}</td>
                    <td>{{ art.maxmenge }}</td>
                    <td>{{ art.plz }}</td>
                    <td>{{ art.beschreibung }}</td>
                    <td>{{ art.gewicht }}</td>
                    <td>{{ art.einheit }}</td>
                    <td>{{ art.mhd }}</td>
                    <td>{{ art.artikelnummer }}</td>
                    <td>
                        <form method="post" style="display:inline;">
                            <input type="hidden" name="art_id" value="{{ art.id }}">
                            <button type="submit" name="loeschen" class="btn btn-danger btn-sm" onclick="return confirm('Artikel wirklich löschen?');">🗑️ Löschen</button>
                        </form>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <div class="mt-4">
        <a href="/admin_matrix" class="btn btn-secondary">📊 Zur Bestellmatrix</a>
    </div>
</div>
{% endblock %}
